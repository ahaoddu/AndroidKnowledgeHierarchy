# 添加预编译模块

预编译本质是通过 Android 中 acp 命令来完成拷贝， 将一个文件从一个地方拷贝到另外一个地方， 并且源文件并不需要通过编译器进行编译， 一般都是针对一些二进制文件，比如没有源码的可执行程序，动态库，apk, 音乐，视频等各种文件。

常见的预编译模块有：

* 已经编译好的 C & CPP 可执行程序
* 已经编译好的 C & CPP 库
* 已经编译好的 Java 库
* 已经编译好的 Android 库
* 已经编译好的 apk
* 一些配置文件


## C & CPP 可执行程序

在 aosp/device/mycompany/product 目录下，创建以下的文件结构：

```bash
.
├── AndroidProducts.mk
├── myaosp.mk
└── prebuilt
    └── executable
        ├── Android.mk
        └── busybox
```

其中 AndroidProducts.mk myaosp.mk 是 [配置product](https://github.com/ahaoddu/AndroidKnowledgeHierarchy/blob/main/4.Framework%E5%BC%80%E5%8F%91/%E9%85%8D%E7%BD%AEProduct.md) 中添加的 product 配置文件。


busybox 文件是一个二进制可执行程序，通过以下命令下载

```bash
wget https://busybox.net/downloads/binaries/1.30.0-i686/busybox
```

其中 Android.mk：

```makefile
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_SRC_FILES := busybox
LOCAL_MODULE := busyboxmk
LOCAL_MODULE_CLASS := EXECUTABLES
LOCAL_MODULE_TAGS := optional
//LOCAL_MODULE_PATH := $(TARGET_OUT)/usr/share/
include $(BUILD_PREBUILT)
```
接下来执行 mm 命令即可编译该模块。

我们也可以将 Android.mk 修改为 Android.bp：

```soong
cc_prebuilt_binary {
    name: "busyboxbp",
    srcs: ["busybox"],
}
```